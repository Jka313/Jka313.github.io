<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JKA5 | BLACK OPS v16.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #050505;
            --win-bg: rgba(8, 10, 12, 0.95);
            --neon-pri: #00ff41; /* Green */
            --neon-sec: #00f3ff; /* Cyan */
            --alert: #ff3333;
            --grid-color: rgba(0, 255, 65, 0.05);
            --font-tech: 'Share Tech Mono', monospace;
            --font-ui: 'Cairo', sans-serif;
        }

        * { box-sizing: border-box; user-select: none; outline: none; }
        body { margin: 0; overflow: hidden; background: #000; font-family: var(--font-tech); color: var(--neon-pri); }

        /* --- BACKGROUND FX --- */
        #bg-layer {
            position: absolute; width: 100vw; height: 100vh; background: #020202;
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 30px 30px;
            z-index: -2;
        }
        .vignette { position: fixed; top:0; left:0; width:100%; height:100%; box-shadow: inset 0 0 150px #000; pointer-events: none; z-index: -1; }
        #particles { position: absolute; top:0; left:0; width:100%; height:100%; pointer-events: none; opacity: 0.3; }

        /* --- TASKBAR --- */
        .taskbar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 45px;
            background: rgba(10,12,10,0.98); border-top: 1px solid #333;
            display: flex; align-items: center; justify-content: space-between; padding: 0 20px; z-index: 200;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.5);
        }
        .start-btn { 
            font-size: 16px; font-weight: bold; letter-spacing: 2px; color: #fff; 
            display: flex; align-items: center; gap: 10px; cursor: pointer;
        }
        .start-btn:hover { color: var(--neon-sec); text-shadow: 0 0 10px var(--neon-sec); }
        
        /* --- ICONS --- */
        .desktop-icons { position: absolute; top: 40px; left: 40px; display: flex; flex-direction: column; gap: 25px; z-index: 10; }
        .icon { width: 90px; text-align: center; cursor: pointer; opacity: 0.7; transition: 0.3s; }
        .icon:hover { opacity: 1; transform: translateX(5px); }
        .icon i { font-size: 28px; margin-bottom: 5px; display: block; color: #ccc; filter: drop-shadow(0 0 2px var(--neon-pri)); }
        .icon span { background: rgba(0,0,0,0.8); padding: 2px 5px; border: 1px solid #333; font-size: 11px; font-family: var(--font-ui); color: var(--neon-sec); }

        /* --- WINDOW SYSTEM --- */
        .window {
            position: absolute; background: var(--win-bg); border: 1px solid #333; border-top: 2px solid var(--neon-pri);
            box-shadow: 0 10px 50px rgba(0,0,0,0.8); display: none; flex-direction: column;
            z-index: 50; transition: transform 0.2s, opacity 0.2s;
        }
        .win-header {
            padding: 8px 12px; background: rgba(255,255,255,0.02); border-bottom: 1px solid #333;
            cursor: grab; display: flex; justify-content: space-between; align-items: center;
        }
        .win-title { font-size: 13px; letter-spacing: 1px; text-transform: uppercase; color: #fff; display: flex; gap:10px; align-items: center; }
        .win-controls span { cursor: pointer; margin-left: 10px; font-size: 14px; color: #666; }
        .win-controls span:hover { color: var(--alert); }
        .win-body { flex: 1; overflow: hidden; position: relative; color: #ccc; font-size: 13px; }

        /* --- APP: VAULT --- */
        .vault-area { padding: 20px; height: 100%; display: flex; flex-direction: column; gap: 10px; }
        .vault-input { background: #000; border: 1px solid #333; color: var(--neon-sec); padding: 10px; font-family: var(--font-tech); width: 100%; resize: none; flex: 1; }
        .btn-action { background: rgba(0,255,65,0.1); border: 1px solid var(--neon-pri); color: var(--neon-pri); padding: 8px 20px; cursor: pointer; font-family: var(--font-tech); transition: 0.3s; }
        .btn-action:hover { background: var(--neon-pri); color: #000; }

        /* --- APP: MONITOR & GRAPH --- */
        canvas { display: block; width: 100%; height: 100%; }
        .monitor-stats { position: absolute; top: 10px; right: 10px; text-align: right; font-size: 10px; color: var(--neon-sec); }

        /* --- APP: TERMINAL --- */
        #term-content { padding: 15px; height: 100%; overflow-y: auto; font-family: 'Courier New', monospace; }
        .cmd-line { display: flex; color: #fff; }
        .prompt { color: var(--neon-pri); margin-right: 8px; }
        input.cmd { background: transparent; border: none; color: #fff; flex: 1; font-family: inherit; }

        /* SCROLLBAR */
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #333; }
    </style>
</head>
<body>
    
    <div id="bg-layer"></div>
    <div class="vignette"></div>
    <canvas id="particles"></canvas>

    <div class="desktop-icons">
        <div class="icon" onclick="openWindow('vault')">
            <i class="fas fa-shield-alt" style="color:var(--neon-gold)"></i>
            <span>Secure Vault</span>
        </div>
        <div class="icon" onclick="openWindow('netgraph')">
            <i class="fas fa-project-diagram" style="color:var(--neon-sec)"></i>
            <span>Net Graph</span>
        </div>
        <div class="icon" onclick="openWindow('monitor')">
            <i class="fas fa-heartbeat" style="color:var(--alert)"></i>
            <span>Sys Monitor</span>
        </div>
        <div class="icon" onclick="openWindow('term')">
            <i class="fas fa-terminal" style="color:var(--neon-pri)"></i>
            <span>Terminal</span>
        </div>
    </div>

    <div id="win-vault" class="window" style="top: 80px; left: 200px; width: 500px; height: 400px;">
        <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
            <div class="win-title"><i class="fas fa-lock"></i> CLASSIFIED NOTES</div>
            <div class="win-controls"><span onclick="closeWindow('win-vault')">✖</span></div>
        </div>
        <div class="win-body vault-area">
            <div style="font-size:11px; color:#666;">DATA STORED LOCALLY (ENCRYPTED)</div>
            <textarea id="vault-content" class="vault-input" placeholder="Enter classified data here..."></textarea>
            <div style="display:flex; justify-content:flex-end; gap:10px;">
                <button class="btn-action" onclick="saveVault()">ENCRYPT & SAVE</button>
                <button class="btn-action" onclick="clearVault()" style="border-color:var(--alert); color:var(--alert)">PURGE</button>
            </div>
        </div>
    </div>

    <div id="win-netgraph" class="window" style="top: 120px; left: 350px; width: 600px; height: 450px;">
        <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
            <div class="win-title"><i class="fas fa-network-wired"></i> NETWORK TOPOLOGY</div>
            <div class="win-controls"><span onclick="closeWindow('win-netgraph')">✖</span></div>
        </div>
        <div class="win-body" style="background:#000;">
            <canvas id="netCanvas"></canvas>
            <div class="monitor-stats">NODES: ACTIVE<br>PING: 24ms</div>
        </div>
    </div>

    <div id="win-monitor" class="window" style="top: 180px; left: 450px; width: 450px; height: 300px;">
        <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
            <div class="win-title"><i class="fas fa-microchip"></i> RESOURCE USAGE</div>
            <div class="win-controls"><span onclick="closeWindow('win-monitor')">✖</span></div>
        </div>
        <div class="win-body" style="background:#080808; padding:10px;">
            <canvas id="chartCanvas"></canvas>
            <div style="position:absolute; bottom:10px; left:10px; font-size:10px; color:var(--neon-pri);">
                CPU: <span id="cpu-val">0</span>% | RAM: <span id="ram-val">0</span>GB
            </div>
        </div>
    </div>

    <div id="win-term" class="window" style="top: 250px; left: 150px; width: 600px; height: 350px;">
        <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
            <div class="win-title">ROOT TERMINAL</div>
            <div class="win-controls"><span onclick="closeWindow('win-term')">✖</span></div>
        </div>
        <div class="win-body" id="term-content" onclick="document.getElementById('cmd').focus()">
            <div>JKA5 Black Ops v16.0</div>
            <div id="term-log"></div>
            <div class="cmd-line">
                <span class="prompt">root@jka5:~#</span>
                <input type="text" id="cmd" class="cmd" autocomplete="off">
            </div>
        </div>
    </div>

    <div class="taskbar">
        <div class="start-btn"><i class="fas fa-dragon"></i> JKA5_OPS</div>
        <div style="font-size:12px; color:#888; display:flex; gap:15px; align-items:center;">
            <i class="fas fa-volume-up" id="sound-icon" style="cursor:pointer; color:#fff" onclick="toggleSound()"></i>
            <span id="clock">00:00:00</span>
        </div>
    </div>

    <script>
        // ================= CONFIG =================
        let soundEnabled = true;
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // ================= INIT =================
        window.onload = function() {
            updateClock();
            initParticles();
            initNetGraph();
            initMonitor();
            loadVault();
            
            // Auto open for effect
            setTimeout(() => openWindow('netgraph'), 500);
            setTimeout(() => openWindow('monitor'), 1000);
        };

        function playSound(type) {
            if(!soundEnabled) return;
            if(audioCtx.state === 'suspended') audioCtx.resume();
            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            
            if(type === 'open') {
                osc.frequency.value = 600;
                osc.type = 'sine';
                gain.gain.value = 0.05;
                osc.start(); osc.stop(audioCtx.currentTime + 0.1);
            } else if (type === 'type') {
                osc.frequency.value = 800 + Math.random()*200;
                osc.type = 'square';
                gain.gain.value = 0.02;
                osc.start(); osc.stop(audioCtx.currentTime + 0.05);
            }
            osc.connect(gain); gain.connect(audioCtx.destination);
        }

        function toggleSound() {
            soundEnabled = !soundEnabled;
            document.getElementById('sound-icon').style.color = soundEnabled ? '#fff' : '#333';
        }

        // ================= 1. SECURE VAULT (PERSISTENCE) =================
        function saveVault() {
            const content = document.getElementById('vault-content').value;
            // Simple Base64 encoding as "Encryption" simulation
            const encrypted = btoa(content); 
            localStorage.setItem('jka5_vault', encrypted);
            logTerm("Data encrypted & saved to local storage.");
            playSound('open');
        }

        function loadVault() {
            const saved = localStorage.getItem('jka5_vault');
            if(saved) {
                try {
                    document.getElementById('vault-content').value = atob(saved);
                } catch(e) { console.log("Vault Empty"); }
            }
        }

        function clearVault() {
            localStorage.removeItem('jka5_vault');
            document.getElementById('vault-content').value = "";
            logTerm("Vault purged.");
        }

        // ================= 2. NET GRAPH VISUALIZER =================
        function initNetGraph() {
            const canvas = document.getElementById('netCanvas');
            const ctx = canvas.getContext('2d');
            let w = canvas.width = 600; let h = canvas.height = 420;
            
            const nodes = [];
            for(let i=0; i<15; i++) {
                nodes.push({
                    x: Math.random()*w, y: Math.random()*h, 
                    vx: (Math.random()-0.5)*1, vy: (Math.random()-0.5)*1
                });
            }

            function animate() {
                ctx.clearRect(0,0,w,h);
                
                // Draw connections
                ctx.strokeStyle = 'rgba(0, 243, 255, 0.2)';
                ctx.lineWidth = 1;
                for(let i=0; i<nodes.length; i++) {
                    for(let j=i+1; j<nodes.length; j++) {
                        const dx = nodes[i].x - nodes[j].x;
                        const dy = nodes[i].y - nodes[j].y;
                        const dist = Math.sqrt(dx*dx + dy*dy);
                        if(dist < 150) {
                            ctx.beginPath(); ctx.moveTo(nodes[i].x, nodes[i].y); ctx.lineTo(nodes[j].x, nodes[j].y); ctx.stroke();
                        }
                    }
                }

                // Draw nodes
                nodes.forEach(n => {
                    n.x += n.vx; n.y += n.vy;
                    if(n.x < 0 || n.x > w) n.vx *= -1;
                    if(n.y < 0 || n.y > h) n.vy *= -1;
                    
                    ctx.fillStyle = '#00f3ff';
                    ctx.beginPath(); ctx.arc(n.x, n.y, 3, 0, Math.PI*2); ctx.fill();
                });
                requestAnimationFrame(animate);
            }
            animate();
        }

        // ================= 3. SYSTEM MONITOR CHART =================
        function initMonitor() {
            const canvas = document.getElementById('chartCanvas');
            const ctx = canvas.getContext('2d');
            let w = canvas.width = 450; let h = canvas.height = 260;
            const data = new Array(50).fill(h/2);
            let offset = 0;

            function draw() {
                ctx.fillStyle = 'rgba(0,0,0,0.1)';
                ctx.fillRect(0,0,w,h);

                // Grid
                ctx.strokeStyle = '#111'; ctx.beginPath();
                for(let i=0; i<w; i+=20) { ctx.moveTo(i,0); ctx.lineTo(i,h); }
                ctx.stroke();

                // Generate Data
                data.shift();
                const val = Math.random() * 50 + h/2 - 25;
                data.push(val);

                // Draw Line
                ctx.strokeStyle = '#00ff41';
                ctx.lineWidth = 2;
                ctx.beginPath();
                for(let i=0; i<data.length; i++) {
                    let x = (i / (data.length-1)) * w;
                    if(i===0) ctx.moveTo(x, data[i]);
                    else ctx.lineTo(x, data[i]);
                }
                ctx.stroke();

                // Fill Area
                ctx.lineTo(w, h); ctx.lineTo(0, h); ctx.fillStyle = 'rgba(0, 255, 65, 0.1)'; ctx.fill();

                // Update Text
                if(offset++ % 10 === 0) {
                    document.getElementById('cpu-val').innerText = Math.floor(Math.random()*30 + 10);
                    document.getElementById('ram-val').innerText = (Math.random()*2 + 4).toFixed(1);
                }

                requestAnimationFrame(draw);
            }
            draw();
        }

        // ================= 4. PARTICLES BG =================
        function initParticles() {
            const c = document.getElementById('particles');
            const ctx = c.getContext('2d');
            c.width = window.innerWidth; c.height = window.innerHeight;
            const p = [];
            for(let i=0; i<50; i++) p.push({x:Math.random()*c.width, y:Math.random()*c.height, s:Math.random()*2});
            
            function draw() {
                ctx.clearRect(0,0,c.width,c.height);
                ctx.fillStyle = '#00ff41';
                p.forEach(part => {
                    part.y += part.s;
                    if(part.y > c.height) part.y = 0;
                    ctx.beginPath(); ctx.arc(part.x, part.y, 1, 0, 6.28); ctx.fill();
                });
                requestAnimationFrame(draw);
            }
            draw();
        }

        // ================= UTILS =================
        function updateClock() {
            document.getElementById('clock').innerText = new Date().toLocaleTimeString();
            setTimeout(updateClock, 1000);
        }

        function logTerm(msg) {
            const log = document.getElementById('term-log');
            log.innerHTML += `<div><span style="color:var(--neon-pri)">➜</span> ${msg}</div>`;
            document.getElementById('term-content').scrollTop = document.getElementById('term-content').scrollHeight;
        }

        // Terminal Input
        document.getElementById('cmd').addEventListener('keypress', (e) => {
            playSound('type');
            if(e.key === 'Enter') {
                logTerm(e.target.value);
                e.target.value = '';
            }
        });

        // Window Manager
        let zIndex = 100;
        function openWindow(id) {
            const win = document.getElementById('win-' + id);
            win.style.display = 'flex'; zIndex++; win.style.zIndex = zIndex;
            playSound('open');
        }
        function closeWindow(id) { document.getElementById(id).style.display = 'none'; }
        
        function dragWindow(elmnt, e) {
            e.preventDefault(); let pos3=e.clientX, pos4=e.clientY; zIndex++; elmnt.style.zIndex = zIndex;
            document.onmouseup = closeDragElement;
            document.onmousemove = (e) => {
                e.preventDefault(); let pos1=pos3-e.clientX, pos2=pos4-e.clientY; pos3=e.clientX; pos4=e.clientY;
                elmnt.style.top=(elmnt.offsetTop-pos2)+"px"; elmnt.style.left=(elmnt.offsetLeft-pos1)+"px";
            };
            function closeDragElement() { document.onmouseup=null; document.onmousemove=null; }
        }
    </script>
</body>
</html>
