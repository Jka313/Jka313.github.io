<!DOCTYPE html>
<html lang="ar" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JKA5 | GOD MODE v8.0</title>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        :root {
            --bg: #050505;
            --win-bg: rgba(12, 14, 12, 0.90); /* Glassmorphism */
            --main-neon: #00ff41; 
            --neon-cyan: #00f3ff;
            --alert: #ff003c;
            --font-code: 'Fira Code', monospace;
            --font-ui: 'Cairo', sans-serif;
        }

        * { box-sizing: border-box; user-select: none; outline: none; }
        body { margin: 0; overflow: hidden; background: var(--bg); font-family: var(--font-code); color: var(--main-neon); transition: color 0.5s; }
        
        /* Screen Effects */
        .crt-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)); background-size: 100% 2px, 3px 100%; pointer-events: none; z-index: 9999; opacity: 0.15; }

        /* --- LOCK SCREEN --- */
        #lock-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 10000; display: flex; flex-direction: column;
            justify-content: center; align-items: center; transition: transform 0.8s cubic-bezier(0.7, 0, 0.3, 1);
        }
        .login-box { text-align: center; width: 300px; }
        .avatar { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--main-neon); margin: 0 auto 20px; background: url('https://www.w3schools.com/howto/img_avatar.png') center/cover; box-shadow: 0 0 20px var(--main-neon); }
        .login-input { background: #111; border: 1px solid #333; color: #fff; padding: 10px; width: 100%; text-align: center; letter-spacing: 3px; margin-bottom: 10px; font-family: var(--font-code); font-size: 18px; }
        .login-btn { background: var(--main-neon); color: #000; border: none; padding: 10px 20px; cursor: pointer; font-weight: bold; width: 100%; }
        
        /* --- DESKTOP --- */
        #desktop { position: relative; width: 100vw; height: 100vh; background: radial-gradient(circle at center, #0a0a0a 0%, #000 100%); overflow: hidden; }
        #matrixCanvas { position: absolute; top: 0; left: 0; opacity: 0.1; z-index: 0; pointer-events: none; }

        /* Taskbar */
        .taskbar {
            position: absolute; bottom: 0; left: 0; width: 100%; height: 50px;
            background: rgba(10, 10, 10, 0.9); border-top: 1px solid #333;
            display: flex; align-items: center; padding: 0 10px; z-index: 200;
            backdrop-filter: blur(10px);
        }
        .start-menu-btn { font-size: 24px; padding: 0 15px; cursor: pointer; color: var(--main-neon); }
        .active-apps { display: flex; gap: 5px; flex: 1; margin-left: 10px; }
        .app-tab { 
            padding: 5px 15px; background: rgba(255,255,255,0.05); border-bottom: 2px solid transparent; 
            cursor: pointer; display: flex; align-items: center; gap: 8px; font-size: 12px; transition: 0.3s; color: #ccc; 
        }
        .app-tab:hover { background: rgba(255,255,255,0.1); }
        .app-tab.active { border-bottom-color: var(--main-neon); color: #fff; background: rgba(0,255,65,0.1); }
        
        .sys-tray { margin-left: auto; display: flex; gap: 15px; font-size: 12px; align-items: center; padding-right: 10px; }

        /* Icons Grid */
        .desktop-icons { position: absolute; top: 30px; left: 30px; display: flex; flex-direction: column; gap: 20px; z-index: 10; }
        .icon { width: 80px; text-align: center; cursor: pointer; opacity: 0.8; transition: 0.2s; }
        .icon:hover { opacity: 1; text-shadow: 0 0 10px var(--main-neon); transform: scale(1.05); }
        .icon i { font-size: 36px; margin-bottom: 5px; display: block; color: #e0e0e0; }
        .icon span { background: rgba(0,0,0,0.6); padding: 2px 5px; border-radius: 3px; font-size: 11px; font-family: var(--font-ui); }

        /* --- WINDOWS SYSTEM --- */
        .window {
            position: absolute; background: var(--win-bg); border: 1px solid #333;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); display: none; flex-direction: column;
            z-index: 50; border-radius: 8px; overflow: hidden; backdrop-filter: blur(12px);
            transition: opacity 0.2s, transform 0.2s; opacity: 0; transform: scale(0.95);
        }
        .window.open { opacity: 1; transform: scale(1); display: flex; }
        .window.minimized { opacity: 0; transform: scale(0.8) translateY(100px); pointer-events: none; }
        
        .win-header {
            padding: 10px 15px; background: rgba(255,255,255,0.03); border-bottom: 1px solid #333;
            cursor: grab; display: flex; justify-content: space-between; align-items: center; user-select: none;
        }
        .win-header:active { cursor: grabbing; }
        .win-title { font-size: 12px; font-weight: bold; letter-spacing: 1px; display: flex; align-items: center; gap: 8px; }
        .win-controls span { cursor: pointer; margin-left: 10px; width: 12px; height: 12px; border-radius: 50%; display: inline-block; }
        .ctrl-min { background: #f1c40f; }
        .ctrl-max { background: #2ecc71; }
        .ctrl-close { background: #e74c3c; }

        .win-body { flex: 1; overflow: auto; position: relative; color: #ccc; font-size: 13px; }

        /* --- APPS SPECIFIC CSS --- */
        
        /* 1. File Explorer */
        .file-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); gap: 15px; padding: 15px; }
        .file-item { text-align: center; cursor: pointer; padding: 10px; border-radius: 5px; }
        .file-item:hover { background: rgba(255,255,255,0.1); }
        .file-item i { font-size: 30px; display: block; margin-bottom: 5px; color: var(--neon-cyan); }
        .file-item.folder i { color: #f1c40f; }
        
        /* 2. Cerebro Monitor */
        #cerebro-canvas { width: 100%; height: 100%; background: #000; }

        /* 3. Messenger */
        .chat-area { display: flex; flex-direction: column; height: 100%; }
        .messages { flex: 1; padding: 15px; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
        .msg { padding: 8px 12px; border-radius: 15px; max-width: 80%; font-size: 12px; }
        .msg.in { background: #333; align-self: flex-start; border-bottom-left-radius: 2px; }
        .msg.out { background: var(--main-neon); color: #000; align-self: flex-end; border-bottom-right-radius: 2px; }
        .chat-input { display: flex; padding: 10px; border-top: 1px solid #333; }
        .chat-input input { flex: 1; background: #111; border: none; padding: 8px; color: #fff; border-radius: 20px; padding-left: 15px; }

        /* 4. Terminal */
        #term-body { background: #080808; padding: 10px; font-family: var(--font-code); height: 100%; }
        .prompt { color: var(--main-neon); margin-right: 5px; }

        /* Scrollbars */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-thumb { background: #333; border-radius: 3px; }
    </style>
</head>
<body>
    <div class="crt-overlay"></div>

    <div id="lock-screen">
        <div class="login-box">
            <div class="avatar"></div>
            <h2 style="margin-bottom: 5px;">ADMINISTRATOR</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 12px;">SECURE SYSTEM v8.0</p>
            <input type="password" class="login-input" id="pass-input" placeholder="••••••">
            <button class="login-btn" onclick="unlockSystem()">LOGIN</button>
            <p id="login-msg" style="color: var(--alert); font-size: 12px; margin-top: 10px; min-height: 15px;"></p>
        </div>
    </div>

    <div id="desktop">
        <canvas id="matrixCanvas"></canvas>

        <div class="desktop-icons">
            <div class="icon" ondblclick="openApp('file-explorer')">
                <i class="fas fa-folder-open" style="color:#f1c40f"></i>
                <span>My Files</span>
            </div>
            <div class="icon" ondblclick="openApp('terminal')">
                <i class="fas fa-terminal"></i>
                <span>Terminal</span>
            </div>
            <div class="icon" ondblclick="openApp('messenger')">
                <i class="fas fa-comment-alt" style="color:#3498db"></i>
                <span>Secure Chat</span>
            </div>
            <div class="icon" ondblclick="openApp('cerebro')">
                <i class="fas fa-chart-area" style="color:#e74c3c"></i>
                <span>Cerebro</span>
            </div>
            <div class="icon" ondblclick="openApp('browser')">
                <i class="fas fa-globe"></i>
                <span>Web</span>
            </div>
        </div>

        <div id="win-file-explorer" class="window" style="top: 100px; left: 200px; width: 600px; height: 400px;">
            <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
                <span class="win-title"><i class="fas fa-folder-open"></i> FILE MANAGER</span>
                <div class="win-controls">
                    <span class="ctrl-min" onclick="minWindow('win-file-explorer')"></span>
                    <span class="ctrl-close" onclick="closeWindow('win-file-explorer')"></span>
                </div>
            </div>
            <div class="win-body">
                <div style="padding: 10px; border-bottom: 1px solid #333; color: #888;" id="path-bar">/home/user</div>
                <div class="file-grid" id="file-view"></div>
            </div>
        </div>

        <div id="win-terminal" class="window" style="top: 150px; left: 250px; width: 600px; height: 400px;">
            <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
                <span class="win-title"><i class="fas fa-terminal"></i> ROOT TERM</span>
                <div class="win-controls">
                    <span class="ctrl-min" onclick="minWindow('win-terminal')"></span>
                    <span class="ctrl-close" onclick="closeWindow('win-terminal')"></span>
                </div>
            </div>
            <div class="win-body" id="term-body" onclick="document.getElementById('cmd-in').focus()">
                <div>JKA5 OS v8.0 [God Mode]</div>
                <div id="term-out"></div>
                <div style="display:flex"><span class="prompt">root@jka5:~#</span><input type="text" id="cmd-in" style="background:transparent; border:none; color:var(--main-neon); flex:1;" autofocus></div>
            </div>
        </div>

        <div id="win-messenger" class="window" style="top: 120px; left: 500px; width: 350px; height: 500px;">
            <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
                <span class="win-title"><i class="fas fa-user-secret"></i> DARK CHAT (Encrypted)</span>
                <div class="win-controls">
                    <span class="ctrl-min" onclick="minWindow('win-messenger')"></span>
                    <span class="ctrl-close" onclick="closeWindow('win-messenger')"></span>
                </div>
            </div>
            <div class="win-body chat-area">
                <div class="messages" id="chat-msgs">
                    <div class="msg in">Unknown: Are you available for a job?</div>
                    <div class="msg in">Unknown: Target is secure bank server.</div>
                </div>
                <div class="chat-input">
                    <input type="text" placeholder="Type message..." onkeypress="sendChat(event)">
                </div>
            </div>
        </div>

        <div id="win-cerebro" class="window" style="top: 200px; left: 150px; width: 500px; height: 300px;">
            <div class="win-header" onmousedown="dragWindow(this.parentElement, event)">
                <span class="win-title"><i class="fas fa-microchip"></i> CEREBRO SYSTEM MONITOR</span>
                <div class="win-controls">
                    <span class="ctrl-min" onclick="minWindow('win-cerebro')"></span>
                    <span class="ctrl-close" onclick="closeWindow('win-cerebro')"></span>
                </div>
            </div>
            <div class="win-body" style="background: #000;">
                <canvas id="cerebro-canvas"></canvas>
                <div style="position:absolute; top:10px; right:10px; color:var(--neon-cyan); font-size:10px;">
                    CPU: <span id="cpu-val">12%</span><br>NET: <span id="net-val">400Mb/s</span>
                </div>
            </div>
        </div>

        <div class="taskbar">
            <div class="start-menu-btn"><i class="fab fa-windows"></i></div>
            <div class="active-apps" id="taskbar-apps">
                </div>
            <div class="sys-tray">
                <i class="fas fa-wifi"></i>
                <i class="fas fa-volume-up"></i>
                <span id="clock">00:00</span>
            </div>
        </div>
    </div>

    <script>
        // ================= SYSTEM CORE =================
        function updateClock() {
            const now = new Date();
            document.getElementById('clock').innerText = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            setTimeout(updateClock, 1000);
        }
        updateClock();
        startMatrix();

        // ================= LOCK SCREEN =================
        function unlockSystem() {
            const pass = document.getElementById('pass-input').value;
            const msg = document.getElementById('login-msg');
            // Password is 'admin' or empty for ease of demo
            if(pass === 'admin' || pass === '') {
                document.getElementById('lock-screen').style.transform = "translateY(-100%)";
                setTimeout(() => { 
                    // تشغيل مراقب النظام عند الدخول
                    startCerebro(); 
                }, 1000);
            } else {
                msg.innerText = "ACCESS DENIED. INCORRECT PASSWORD.";
            }
        }

        // ================= WINDOW MANAGER (MULTITASKING) =================
        let zIndex = 100;
        const openWindows = new Set();

        function openApp(appId) {
            const winId = 'win-' + appId;
            const win = document.getElementById(winId);
            
            // إذا كانت النافذة مغلقة (أول مرة)
            if(win.style.display !== 'flex') {
                win.classList.remove('minimized');
                win.classList.add('open');
                win.style.display = 'flex';
                bringToFront(win);
                addToTaskbar(appId, winId);
                
                // Special init functions
                if(appId === 'file-explorer') renderExplorer();
            } else {
                // إذا كانت موجودة، فقط ارفعها للأمام
                win.classList.remove('minimized');
                bringToFront(win);
            }
        }

        function closeWindow(winId) {
            const win = document.getElementById(winId);
            win.classList.remove('open');
            setTimeout(() => win.style.display = 'none', 200);
            
            // Remove from taskbar
            const appId = winId.replace('win-', '');
            removeFromTaskbar(appId);
        }

        function minWindow(winId) {
            const win = document.getElementById(winId);
            win.classList.add('minimized');
        }

        function bringToFront(win) {
            zIndex++;
            win.style.zIndex = zIndex;
        }

        // --- Taskbar Logic ---
        function addToTaskbar(appId, winId) {
            if(document.getElementById('tab-' + appId)) return;
            
            const container = document.getElementById('taskbar-apps');
            const tab = document.createElement('div');
            tab.className = 'app-tab';
            tab.id = 'tab-' + appId;
            
            // Get Icon and Name based on ID
            let iconClass = 'fa-window-maximize';
            let name = appId;
            if(appId === 'terminal') iconClass = 'fa-terminal';
            if(appId === 'messenger') iconClass = 'fa-comment-alt';
            if(appId === 'cerebro') iconClass = 'fa-chart-area';
            if(appId === 'file-explorer') iconClass = 'fa-folder-open';

            tab.innerHTML = `<i class="fas ${iconClass}"></i> ${name.toUpperCase()}`;
            
            tab.onclick = () => {
                const win = document.getElementById(winId);
                if(win.classList.contains('minimized')) {
                    win.classList.remove('minimized');
                    bringToFront(win);
                } else {
                    // If already focused, minimize. If not focused, focus.
                    if(win.style.zIndex == zIndex) minWindow(winId);
                    else bringToFront(win);
                }
            };
            container.appendChild(tab);
        }

        function removeFromTaskbar(appId) {
            const tab = document.getElementById('tab-' + appId);
            if(tab) tab.remove();
        }

        function dragWindow(elmnt, e) {
            e.preventDefault();
            let pos3 = e.clientX;
            let pos4 = e.clientY;
            bringToFront(elmnt);

            document.onmouseup = closeDragElement;
            document.onmousemove = elementDrag;

            function elementDrag(e) {
                e.preventDefault();
                let pos1 = pos3 - e.clientX;
                let pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
                elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
            }

            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        // ================= APPS LOGIC =================

        // 1. File Explorer
        const fileSystem = {
            "Documents": {type: "folder"},
            "Images": {type: "folder"},
            "Tools": {type: "folder"},
            "notes.txt": {type: "file"},
            "passwords.db": {type: "file"},
            "payload.py": {type: "file"}
        };

        function renderExplorer() {
            const grid = document.getElementById('file-view');
            grid.innerHTML = '';
            for(let f in fileSystem) {
                const isFolder = fileSystem[f].type === 'folder';
                const item = document.createElement('div');
                item.className = `file-item ${isFolder ? 'folder' : ''}`;
                item.innerHTML = `<i class="fas ${isFolder ? 'fa-folder' : 'fa-file-code'}"></i> <span>${f}</span>`;
                grid.appendChild(item);
            }
        }

        // 2. Terminal
        const cmdIn = document.getElementById('cmd-in');
        const termOut = document.getElementById('term-out');
        cmdIn.addEventListener('keypress', (e) => {
            if(e.key === 'Enter') {
                const cmd = cmdIn.value;
                termOut.innerHTML += `<div><span style="color:var(--main-neon)">root@jka5:~#</span> ${cmd}</div>`;
                if(cmd === 'ls') termOut.innerHTML += `<div>Documents  Images  Tools  notes.txt</div>`;
                else if(cmd === 'help') termOut.innerHTML += `<div>Commands: ls, clear, date, reboot</div>`;
                else if(cmd === 'clear') termOut.innerHTML = '';
                else termOut.innerHTML += `<div style="color:#666">bash: command not found</div>`;
                cmdIn.value = '';
                document.getElementById('term-body').scrollTop = document.getElementById('term-body').scrollHeight;
            }
        });

        // 3. Messenger
        function sendChat(e) {
            if(e.key === 'Enter') {
                const input = e.target;
                const txt = input.value;
                if(txt.trim() === '') return;
                
                const msgs = document.getElementById('chat-msgs');
                msgs.innerHTML += `<div class="msg out">${txt}</div>`;
                input.value = '';
                msgs.scrollTop = msgs.scrollHeight;

                // Fake Reply
                setTimeout(() => {
                    msgs.innerHTML += `<div class="msg in">Unknown: Payment received. Stand by.</div>`;
                    msgs.scrollTop = msgs.scrollHeight;
                }, 1500);
            }
        }

        // 4. Cerebro Monitor (Canvas Animation)
        function startCerebro() {
            const c = document.getElementById('cerebro-canvas');
            const ctx = c.getContext('2d');
            let width = c.width = c.parentElement.offsetWidth;
            let height = c.height = c.parentElement.offsetHeight;
            
            const dataPoints = new Array(50).fill(height/2);
            
            function draw() {
                ctx.fillStyle = 'rgba(0,0,0,0.1)';
                ctx.fillRect(0, 0, width, height);
                
                // Shift data
                dataPoints.shift();
                dataPoints.push(Math.random() * height);
                
                ctx.beginPath();
                ctx.strokeStyle = '#00ff41';
                ctx.lineWidth = 2;
                
                for(let i=0; i<dataPoints.length; i++) {
                    let x = (i / dataPoints.length) * width;
                    let y = dataPoints[i];
                    if(i===0) ctx.moveTo(x,y);
                    else ctx.lineTo(x,y);
                }
                ctx.stroke();
                
                // Update text values
                if(Math.random() > 0.8) document.getElementById('cpu-val').innerText = Math.floor(Math.random()*100) + "%";
                
                requestAnimationFrame(draw);
            }
            draw();
        }

        // Matrix Background
        function startMatrix() {
            const c = document.getElementById("matrixCanvas");
            const ctx = c.getContext("2d");
            c.width = window.innerWidth; c.height = window.innerHeight;
            const chars = "01JKA5"; 
            const drops = Array(Math.floor(c.width/20)).fill(1);
            setInterval(()=>{
                ctx.fillStyle="rgba(0,0,0,0.05)"; ctx.fillRect(0,0,c.width,c.height);
                ctx.fillStyle="#0f0"; ctx.font="15px monospace";
                drops.forEach((y,i)=>{
                    ctx.fillText(chars[Math.floor(Math.random()*chars.length)],i*20,y*20);
                    if(y*20>c.height && Math.random()>0.98) drops[i]=0;
                    drops[i]++;
                });
            }, 50);
        }
    </script>
</body>
</html>
