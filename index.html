<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JKA5 - الأمن السيبراني</title>
  <style>
    :root {
      --color-bg-dark: #0a0f27;
      --color-bg-light: #e6f2ff;
      --color-accent: #00ffff;
      --color-accent-dark: #00cccc;
      --color-text-dark: #001022;
      --color-text-light: #e0e6ff;
      --color-news-bg: #001933;
      --color-news-bg-light: #cceeff;
      --color-footer-bg: #001933;
    }

    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: var(--color-bg-dark);
      color: var(--color-text-light);
      display: flex;
      flex-direction: column;
      min-height: 100vh;
      transition: background 0.3s ease, color 0.3s ease;
    }

    body.light-mode {
      background: var(--color-bg-light);
      color: var(--color-text-dark);
    }

    /* زر تبديل الوضع */
    .mode-toggle {
      position: fixed;
      top: 15px;
      left: 15px;
      z-index: 100;
      background: var(--color-accent);
      border-radius: 25px;
      width: 48px;
      height: 48px;
      border: none;
      cursor: pointer;
      box-shadow:
        0 0 15px var(--color-accent),
        inset 0 0 10px var(--color-accent-light);
      transition: background 0.3s ease, box-shadow 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.6rem;
      color: var(--color-text-dark);
      user-select: none;
    }
    .mode-toggle:hover {
      background: var(--color-accent-dark);
      box-shadow:
        0 0 25px var(--color-accent-dark),
        inset 0 0 15px var(--color-accent-dark);
    }

    /* الخلفية الشبكية */
    .network-bg {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: radial-gradient(circle at center, #0a0f27, #001933);
      overflow: hidden;
      z-index: 0;
    }

    .network-points span {
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background-color: var(--color-accent);
      box-shadow: 0 0 8px var(--color-accent);
      animation: pulse 3s ease-in-out infinite alternate;
      opacity: 0.8;
    }
    .network-points {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      pointer-events: none;
      z-index: 1;
    }

    @keyframes pulse {
      0% {
        opacity: 0.6;
        transform: scale(1);
      }
      100% {
        opacity: 1;
        transform: scale(1.4);
      }
    }

    /* التنسيق الرئيسي */
    main.main-wrapper {
      z-index: 10;
      display: flex;
      flex-wrap: nowrap;
      justify-content: center;
      gap: 20px;
      flex-grow: 1;
      padding: 80px 40px 40px;
      max-width: 1200px;
      margin: 0 auto;
    }

    /* الشعار والوصف */
    .logo-container {
      flex: 0 0 300px;
      text-align: center;
      user-select: none;
    }
    .logo {
      font-size: 5rem;
      font-weight: 900;
      font-family: 'Consolas', monospace;
      letter-spacing: 0.1em;
      color: var(--color-accent);
      text-shadow:
        0 0 10px #00aaff,
        0 0 20px #00ddff,
        0 0 30px #00ffff,
        0 0 40px #00ffff,
        0 0 50px #00ffff;
      animation: glow 2s ease-in-out infinite alternate;
      margin-bottom: 12px;
    }
    @keyframes glow {
      0% {
        text-shadow:
          0 0 5px #00aaff,
          0 0 10px #00ccff,
          0 0 15px #00ffff,
          0 0 20px #00ffff,
          0 0 30px #00ffff;
        color: #00ccff;
      }
      100% {
        text-shadow:
          0 0 20px #00ffff,
          0 0 30px #00ffff,
          0 0 40px #00ffff,
          0 0 50px #00ffff,
          0 0 60px #00ffff;
        color: #1affff;
      }
    }
    .subtitle {
      font-size: 1.25rem;
      color: #66ccffcc;
      font-weight: 600;
      letter-spacing: 0.05em;
    }
    body.light-mode .subtitle {
      color: #006699;
    }

    /* قسم الأخبار */
    .news-section {
      flex: 1 1 400px;
      background: var(--color-news-bg);
      border-radius: 15px;
      padding: 20px 25px;
      max-height: 550px;
      display: flex;
      flex-direction: column;
      box-shadow: 0 0 25px rgba(0,255,255,0.2);
      overflow: hidden;
      position: relative;
    }
    body.light-mode .news-section {
      background: var(--color-news-bg-light);
      color: var(--color-text-dark);
      box-shadow: 0 0 25px rgba(0,150,255,0.3);
    }
    .news-section h2 {
      margin: 0 0 15px 0;
      font-weight: 700;
      font-size: 1.6rem;
      color: var(--color-accent);
    }
    body.light-mode .news-section h2 {
      color: #0077cc;
    }
    /* قائمة الأخبار */
    #news-list {
      list-style: none;
      margin: 0;
      padding: 0;
      overflow-y: auto;
      flex-grow: 1;
      font-size: 1rem;
      border-top: 1px solid #00ffff55;
      border-bottom: 1px solid #00ffff55;
      padding-top: 10px;
      padding-bottom: 10px;
      outline: none;
    }
    #news-list li {
      margin-bottom: 12px;
      line-height: 1.3;
    }
    #news-list li a {
      color: var(--color-accent);
      text-decoration: none;
      transition: color 0.3s ease;
    }
    #news-list li a:hover,
    #news-list li a:focus {
      color: #66ffff;
      outline: none;
      text-decoration: underline;
    }
    body.light-mode #news-list li a {
      color: #0077cc;
    }
    body.light-mode #news-list li a:hover,
    body.light-mode #news-list li a:focus {
      color: #005fa3;
    }

    /* شاشة التحميل */
    .loading-overlay {
      position: absolute;
      top: 55px;
      left: 0;
      width: 100%;
      height: calc(100% - 55px);
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 15px;
      transition: opacity 0.3s ease;
      z-index: 20;
    }
    .loading-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    /* سبينر التحميل */
    .spinner {
      border: 6px solid #00ffff44;
      border-top: 6px solid var(--color-accent);
      border-radius: 50%;
      width: 48px;
      height: 48px;
      animation: spin 1.2s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* قسم الإحصائيات */
    .stats-section {
      flex: 0 0 320px;
      background: var(--color-news-bg);
      border-radius: 15px;
      padding: 20px 25px;
      box-shadow: 0 0 25px rgba(0,255,255,0.2);
      color: var(--color-text-light);
      display: flex;
      flex-direction: column;
      gap: 20px;
      max-height: 550px;
    }
    body.light-mode .stats-section {
      background: var(--color-news-bg-light);
      color: var(--color-text-dark);
      box-shadow: 0 0 25px rgba(0,150,255,0.3);
    }
    .stats-section h2 {
      margin: 0;
      font-weight: 700;
      font-size: 1.6rem;
      color: var(--color-accent);
    }
    body.light-mode .stats-section h2 {
      color: #0077cc;
    }
    .stats-content {
      flex-grow: 1;
      overflow-y: auto;
      border-top: 1px solid #00ffff55;
      border-bottom: 1px solid #00ffff55;
      padding: 12px 0;
    }
    .stat-item {
      margin-bottom: 14px;
    }
    .stat-item h3 {
      margin: 0 0 4px 0;
      font-weight: 700;
      font-size: 1.1rem;
      color: var(--color-accent);
    }
    body.light-mode .stat-item h3 {
      color: #0077cc;
    }
    .stat-item p {
      margin: 0;
      font-size: 1rem;
      color: var(--color-text-light);
    }
    body.light-mode .stat-item p {
      color: var(--color-text-dark);
    }

    /* الرسم البياني */
    #attacksChart {
      width: 100%;
      height: 180px;
      border-radius: 12px;
      background: #001a44;
      box-shadow: inset 0 0 10px #00ffff44;
    }
    body.light-mode #attacksChart {
      background: #cceeff;
      box-shadow: inset 0 0 10px #0077cc44;
    }

    /* لوحة التحكم */
    .control-panel {
      margin-top: 15px;
      background: #000f22cc;
      border-radius: 12px;
      padding: 15px 20px;
      box-shadow: inset 0 0 12px #00ffff88;
      font-family: 'JetBrains Mono', monospace;
      font-size: 0.95rem;
      color: var(--color-accent);
      transition: background 0.3s ease, color 0.3s ease;
    }
    body.light-mode .control-panel {
      background: #bceaffcc;
      color: #004466;
    }
    .control-panel label {
      display: block;
      margin-bottom: 6px;
      font-weight: 700;
      color: var(--color-accent);
    }
    body.light-mode .control-panel label {
      color: #006699;
    }
    .control-panel input[type="number"],
    .control-panel input[type="text"] {
      width: 100%;
      padding: 8px 12px;
      border-radius: 8px;
      border: none;
      box-sizing: border-box;
      font-family: 'JetBrains Mono', monospace;
      font-size: 1rem;
      margin-bottom: 10px;
      color: var(--color-text-dark);
    }
    .control-panel button {
      cursor: pointer;
      background: var(--color-accent);
      color: var(--color-text-dark);
      border: none;
      padding: 10px 18px;
      border-radius: 10px;
      font-weight: 700;
      font-size: 1.1rem;
      transition: background 0.3s ease;
      width: 100%;
    }
    .control-panel button:hover {
      background: var(--color-accent-dark);
    }

    /* استجابة */
    @media (max-width: 960px) {
      main.main-wrapper {
        flex-direction: column;
        padding: 60px 20px 30px;
        max-width: 100%;
      }
      .logo-container,
      .news-section,
      .stats-section {
        flex: none !important;
        max-width: 100% !important;
        margin-bottom: 25px;
        max-height: none !important;
      }
    }

    /* روابط وأزرار */
    a:focus, button:focus {
      outline: 2px solid var(--color-accent);
      outline-offset: 2px;
    }

  </style>
</head>
<body>

  <button class="mode-toggle" aria-label="تبديل الوضع الليلي والنهاري" title="تبديل الوضع">☀️</button>

  <div class="network-bg"></div>
  <div class="network-points" aria-hidden="true">
    <span style="top:10%; left:15%; animation-delay:0s;"></span>
    <span style="top:25%; left:40%; animation-delay:0.8s;"></span>
    <span style="top:60%; left:35%; animation-delay:1.2s;"></span>
    <span style="top:40%; left:80%; animation-delay:1.6s;"></span>
    <span style="top:70%; left:75%; animation-delay:2s;"></span>
    <span style="top:85%; left:20%; animation-delay:2.5s;"></span>
    <span style="top:15%; left:85%; animation-delay:3s;"></span>
  </div>

  <main class="main-wrapper" role="main" aria-label="محتوى الموقع">

    <section class="logo-container" aria-label="شعار الموقع ووصفه">
      <h1 class="logo" aria-label="شعار JKA5">JKA5</h1>
      <p class="subtitle">بوابتك إلى عالم الأمن السيبراني</p>
    </section>

    <section class="news-section" aria-live="polite" aria-label="أحدث أخبار الأمن السيبراني">
      <h2>أحدث أخبار الثغرات والهجمات</h2>
      <div class="loading-overlay" id="news-loading">
        <div class="spinner" aria-hidden="true"></div>
      </div>
      <ul id="news-list" tabindex="0" aria-atomic="true" aria-relevant="additions">
        <!-- الأخبار يتم تحميلها هنا -->
      </ul>
    </section>

    <section class="stats-section" aria-label="إحصائيات الهجمات ولوحة تحكم الإدارة">
      <h2>إحصائيات الهجمات</h2>
      <div class="stats-content" id="stats-content">
        <div class="stat-item">
          <h3>عدد الهجمات الحالية:</h3>
          <p id="attacks-count">جاري التحميل...</p>
        </div>
        <div class="stat-item">
          <h3>أبرز الثغرات:</h3>
          <p id="top-vulns">جاري التحميل...</p>
        </div>
        <div class="stat-item">
          <h3>أهم المناطق المستهدفة:</h3>
          <p id="top-regions">جاري التحميل...</p>
        </div>
        <canvas id="attacksChart" aria-label="رسم بياني لعدد الهجمات عبر الوقت" role="img"></canvas>
      </div>
      <form class="control-panel" aria-label="لوحة تحكم تحديث الإحصائيات" id="control-panel">
        <label for="input-attacks">عدد الهجمات</label>
        <input type="number" id="input-attacks" min="0" aria-required="true" aria-describedby="attacks-desc" />
        <label for="input-vulns">أبرز الثغرات</label>
        <input type="text" id="input-vulns" aria-required="false" />
        <label for="input-regions">أهم المناطق المستهدفة</label>
        <input type="text" id="input-regions" aria-required="false" />
        <button type="submit" id="update-stats-btn">تحديث الإحصائيات</button>
      </form>
    </section>

  </main>

  <footer style="text-align:center; padding:12px 10px; font-size:0.9rem; background: var(--color-footer-bg); color:#99bbffcc; user-select:none;">
    © 2025 JKA5.xyz - جميع الحقوق محفوظة
  </footer>

  <!-- مكتبة Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <script>
    // تبديل الوضع
    const body = document.body;
    const modeToggle = document.querySelector('.mode-toggle');

    function updateModeIcon() {
      modeToggle.textContent = body.classList.contains('light-mode') ? '🌙' : '☀️';
      modeToggle.title = body.classList.contains('light-mode') ? 'تبديل إلى الوضع الليلي' : 'تبديل إلى الوضع النهاري';
    }

    modeToggle.addEventListener('click', () => {
      body.classList.toggle('light-mode');
      updateModeIcon();
    });

    updateModeIcon();

    // بيانات مبدئية للإحصائيات
    let attacksData = [5, 10, 15, 20, 25, 30, 40];
    const attacksCountEl = document.getElementById('attacks-count');
    const topVulnsEl = document.getElementById('top-vulns');
    const topRegionsEl = document.getElementById('top-regions');

    // تحديث الإحصائيات النصية
    function updateStatsText(attacks, vulns, regions) {
      attacksCountEl.textContent = attacks;
      topVulnsEl.textContent = vulns || 'لا توجد معلومات';
      topRegionsEl.textContent = regions || 'لا توجد معلومات';
    }

    updateStatsText(40, 'ثغرة NVIDIA Container Toolkit، LAMEHUG، BADBOX 2.0', 'أوكرانيا، الولايات المتحدة، الصين');

    // الرسم البياني
    const ctx = document.getElementById('attacksChart').getContext('2d');
    const chart = new Chart(ctx, {
      type: 'line',
      data: {
        labels: ['1س', '2س', '3س', '4س', '5س', '6س', '7س'],
        datasets: [{
          label: 'عدد الهجمات',
          data: attacksData,
          backgroundColor: 'rgba(0, 255, 255, 0.25)',
          borderColor: 'rgba(0, 255, 255, 0.75)',
          borderWidth: 3,
          pointRadius: 4,
          pointBackgroundColor: 'rgba(0, 255, 255, 1)',
          tension: 0.3
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          y: {
            beginAtZero: true,
            grid: {
              color: '#00ffff44'
            },
            ticks: {
              color: 'cyan',
              font: {
                size: 14
              }
            }
          },
          x: {
            grid: {
              color: '#00ffff22'
            },
            ticks: {
              color: 'cyan',
              font: {
                size: 14
              }
            }
          }
        },
        plugins: {
          legend: {
            labels: {
              color: 'cyan',
              font: {
                size: 16,
                weight: 'bold'
              }
            }
          }
        }
      }
    });

    // تحميل الأخبار من API وهمي (تقدر تغير الرابط لمصدر حقيقي)
    const newsList = document.getElementById('news-list');
    const newsLoading = document.getElementById('news-loading');

    async function fetchNews() {
      newsLoading.classList.remove('hidden');
      try {
        // هنا تقدر تغير الرابط ل API حقيقية لأخبار الأمن السيبراني
        const response = await fetch('https://api.currentsapi.services/v1/latest-news?apiKey=demo&category=technology');
        if (!response.ok) throw new Error('فشل تحميل الأخبار');
        const data = await response.json();
        newsList.innerHTML = '';
        data.news.slice(0, 8).forEach(item => {
          const li = document.createElement('li');
          const a = document.createElement('a');
          a.href = item.url;
          a.target = '_blank';
          a.rel = 'noopener noreferrer nofollow';
          a.textContent = item.title;
          li.appendChild(a);
          newsList.appendChild(li);
        });
      } catch (error) {
        newsList.innerHTML = '<li>لا يمكن تحميل الأخبار حالياً.</li>';
      } finally {
        newsLoading.classList.add('hidden');
      }
    }
    fetchNews();

    // لوحة تحكم تحديث الإحصائيات
    const controlPanel = document.getElementById('control-panel');
    controlPanel.addEventListener('submit', e => {
      e.preventDefault();
      const attacks = document.getElementById('input-attacks').value || '0';
      const vulns = document.getElementById('input-vulns').value.trim();
      const regions = document.getElementById('input-regions').value.trim();
      updateStatsText(attacks, vulns, regions);

      // تحديث الرسم البياني بالهجمات الجديدة (تبسيط)
      const newVal = Number(attacks);
      if (!isNaN(newVal)) {
        attacksData.push(newVal);
        if (attacksData.length > 7) attacksData.shift();
        chart.data.datasets[0].data = attacksData;
        chart.update();
      }
      // تنظيف المدخلات
      controlPanel.reset();
    });
  </script>

</body>
</html>
